



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Wordops documentation and user guides">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.5.0">
    
    
      
        <title>WordPress sites migration - WordOps Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#03a9f4">
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="manifest" href="../../manifest.webmanifest">
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="../../css/asciinema-player.min.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="light-blue" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#wordpress-sites-migration" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="WordOps Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../images/logo-icon.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              WordOps Documentation
            </span>
            <span class="md-header-nav__topic">
              
                WordPress sites migration
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/WordOps/WordOps/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../about/give-wordops-github-star/" class="md-tabs__link">
          About
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../getting-started/prerequesites/" class="md-tabs__link">
          Getting Started
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../commands/" class="md-tabs__link">
          Commands
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../how-to/" class="md-tabs__link">
          How to
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../" class="md-tabs__link md-tabs__link--active">
          Guides
        </a>
      
    </li>
  

      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../troubleshooting/bug-reporting/" class="md-tabs__link">
          Troubleshooting
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="WordOps Documentation" class="md-nav__button md-logo">
      
        <img src="../../images/logo-icon.png" width="48" height="48">
      
    </a>
    WordOps Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/WordOps/WordOps/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/give-wordops-github-star/" title="Give WordOps a Github star" class="md-nav__link">
      Give WordOps a Github star
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/from-easyengine-to-wordops/" title="From EasyEngine to WordOps" class="md-nav__link">
      From EasyEngine to WordOps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/code-of-conduct/" title="Code of conduct" class="md-nav__link">
      Code of conduct
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/WordOps/WordOps/graphs/contributors" title="Contributors" class="md-nav__link">
      Contributors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/prerequesites/" title="Prerequisites" class="md-nav__link">
      Prerequisites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/installation-guide/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/post-install-steps/" title="Post-install steps" class="md-nav__link">
      Post-install steps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/creating-sites/" title="Creating sites" class="md-nav__link">
      Creating sites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/wordops-structure/" title="WordOps structure" class="md-nav__link">
      WordOps structure
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Commands
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Commands
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/site/" title="site" class="md-nav__link">
      site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/stack/" title="stack" class="md-nav__link">
      stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/debug/" title="debug" class="md-nav__link">
      debug
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/clean/" title="clean" class="md-nav__link">
      clean
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/info/" title="info" class="md-nav__link">
      info
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/log/" title="log" class="md-nav__link">
      log
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/secure/" title="secure" class="md-nav__link">
      secure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/maintenance/" title="maintenance" class="md-nav__link">
      maintenance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/update/" title="update" class="md-nav__link">
      update
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      How to
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        How to
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../how-to/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../how-to/wp-language/" title="Set WordPress language" class="md-nav__link">
      Set WordPress language
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../how-to/secure-22222/" title="Secure WordOps backend" class="md-nav__link">
      Secure WordOps backend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../how-to/configure-letsencrypt-dns-api-validation/" title="Configure LetsEncrypt DNS API" class="md-nav__link">
      Configure LetsEncrypt DNS API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../how-to/get-a-plus-grade-ssllabs/" title="Get A+ grade on ssllabs" class="md-nav__link">
      Get A+ grade on ssllabs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../how-to/add-ftp-users/" title="Add FTP users" class="md-nav__link">
      Add FTP users
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../how-to/remote-mysql-server/" title="Remote MySQL server with WordOps" class="md-nav__link">
      Remote MySQL server with WordOps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../how-to/ubuntu-lts-hwe-stacks/" title="Install HWE stacks on Ubuntu" class="md-nav__link">
      Install HWE stacks on Ubuntu
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../migration-from-easyengine/" title="EasyEngine Migration" class="md-nav__link">
      EasyEngine Migration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../manage-ssl-certificates/" title="LetsEncrypt SSL certificates" class="md-nav__link">
      LetsEncrypt SSL certificates
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        WordPress sites migration
      </label>
    
    <a href="./" title="WordPress sites migration" class="md-nav__link md-nav__link--active">
      WordPress sites migration
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    Context
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#on-the-previous-server-old-srv" class="md-nav__link">
    On the previous server (OLD-SRV)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dump-wordpress-database" class="md-nav__link">
    Dump WordPress database
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#on-the-new-server-new-srv" class="md-nav__link">
    On the new server (NEW-SRV)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-server-update" class="md-nav__link">
    Initial server update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-wordops-and-main-stacks" class="md-nav__link">
    Install WordOps and main stacks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-wordpress-site-with-same-domain" class="md-nav__link">
    Create wordpress site with same domain
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleanup-default-wp-database-and-remove-files" class="md-nav__link">
    Cleanup default WP database and remove files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-a-password-less-ssh-access-between-your-servers" class="md-nav__link">
    Setup a password-less ssh access between your servers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generate-ssh-keys" class="md-nav__link">
    Generate SSH-Keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-ssh-public-key-to-old-srv" class="md-nav__link">
    Add SSH Public key to OLD-SRV
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-login-without-password" class="md-nav__link">
    SSH Login without password
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-alias-and-config" class="md-nav__link">
    SSH Alias and config
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transfer-files-from-old-srv-to-new-srv" class="md-nav__link">
    Transfer files from OLD-SRV to NEW-SRV
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#do-not-copy-the-file-wp-configphp" class="md-nav__link">
    Do not copy the file wp-config.php
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restore-the-database-on-new-srv" class="md-nav__link">
    Restore the database on NEW-SRV
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lets-encrypt" class="md-nav__link">
    Let's Encrypt
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../wordops-with-digitalocean-volume/" title="WordOps With DigitalOcean volumes" class="md-nav__link">
      WordOps With DigitalOcean volumes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../enable-live-kernel-patching/" title="Enable live kernel patching on Ubuntu" class="md-nav__link">
      Enable live kernel patching on Ubuntu
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://wordops.net/f-a-q/" title="F.A.Q" class="md-nav__link">
      F.A.Q
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://wordops.net" title="WordOps.net" class="md-nav__link">
      WordOps.net
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://wordops.net/blog/" title="Blog" class="md-nav__link">
      Blog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://community.wordops.net" title="Forum" class="md-nav__link">
      Forum
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://chat.wordops.net" title="Chat" class="md-nav__link">
      Chat
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://twitter.com/WordOps_" title="Twitter" class="md-nav__link">
      Twitter
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://mastodon.top/@WordOps" title="Mastodon" class="md-nav__link">
      Mastodon
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14">
    
    <label class="md-nav__link" for="nav-14">
      Troubleshooting
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        Troubleshooting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../troubleshooting/bug-reporting/" title="Bug reporting guidelines" class="md-nav__link">
      Bug reporting guidelines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../troubleshooting/common-issues/" title="Common issues" class="md-nav__link">
      Common issues
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    Context
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#on-the-previous-server-old-srv" class="md-nav__link">
    On the previous server (OLD-SRV)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dump-wordpress-database" class="md-nav__link">
    Dump WordPress database
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#on-the-new-server-new-srv" class="md-nav__link">
    On the new server (NEW-SRV)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-server-update" class="md-nav__link">
    Initial server update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-wordops-and-main-stacks" class="md-nav__link">
    Install WordOps and main stacks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-wordpress-site-with-same-domain" class="md-nav__link">
    Create wordpress site with same domain
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleanup-default-wp-database-and-remove-files" class="md-nav__link">
    Cleanup default WP database and remove files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-a-password-less-ssh-access-between-your-servers" class="md-nav__link">
    Setup a password-less ssh access between your servers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generate-ssh-keys" class="md-nav__link">
    Generate SSH-Keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-ssh-public-key-to-old-srv" class="md-nav__link">
    Add SSH Public key to OLD-SRV
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-login-without-password" class="md-nav__link">
    SSH Login without password
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-alias-and-config" class="md-nav__link">
    SSH Alias and config
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transfer-files-from-old-srv-to-new-srv" class="md-nav__link">
    Transfer files from OLD-SRV to NEW-SRV
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#do-not-copy-the-file-wp-configphp" class="md-nav__link">
    Do not copy the file wp-config.php
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restore-the-database-on-new-srv" class="md-nav__link">
    Restore the database on NEW-SRV
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lets-encrypt" class="md-nav__link">
    Let's Encrypt
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/WordOps/docs.wordops.net/edit/master/docs/guides/wordpress-migration.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="wordpress-sites-migration">WordPress sites migration<a class="headerlink" href="#wordpress-sites-migration" title="Permanent link">&para;</a></h1>
<h2 id="context">Context<a class="headerlink" href="#context" title="Permanent link">&para;</a></h2>
<p>You want to migrate a WordPress site hosted on a server running EEv3 or WordOps to a new one running with WordOps.
The site you want to migrate was created with the flag <code class="codehilite"><span class="err">--wpredis</span></code></p>
<p>In our example :</p>
<ul>
<li>new server name is NEW-SRV with IP 10.0.0.1</li>
<li>the previous server is OLD-SRV with IP 192.168.0.1</li>
<li>site domain is mydomain.tld</li>
</ul>
<h2 id="on-the-previous-server-old-srv">On the previous server (OLD-SRV)<a class="headerlink" href="#on-the-previous-server-old-srv" title="Permanent link">&para;</a></h2>
<h3 id="dump-wordpress-database">Dump WordPress database<a class="headerlink" href="#dump-wordpress-database" title="Permanent link">&para;</a></h3>
<p>Go into your site directory and dump WordPress database with WP-CLI</p>
<div class="codehilite"><pre><span></span><span class="nb">cd</span> /var/www/mydomain.tld/htdocs
wp db <span class="nb">export</span> --allow-root
</pre></div>

<div class="admonition info">
<p class="admonition-title">Info</p>
<p>If WP-CLI isn't installed on your server, you can get it by running the following commands :
<div class="codehilite"><pre><span></span>curl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar
chmod +x wp-cli.phar
sudo mv wp-cli.phar /usr/local/bin/wp
</pre></div></p>
</div>
<h2 id="on-the-new-server-new-srv">On the new server (NEW-SRV)<a class="headerlink" href="#on-the-new-server-new-srv" title="Permanent link">&para;</a></h2>
<h3 id="initial-server-update">Initial server update<a class="headerlink" href="#initial-server-update" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>apt-get update <span class="o">&amp;&amp;</span> apt-get dist-upgrade -y <span class="o">&amp;&amp;</span> apt-get autoremove --purge -y <span class="o">&amp;&amp;</span> apt-get autoclean
</pre></div>

<h3 id="install-wordops-and-main-stacks">Install WordOps and main stacks<a class="headerlink" href="#install-wordops-and-main-stacks" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>wget -qO wo wops.cc <span class="o">&amp;&amp;</span> sudo bash wo
wo stack install
</pre></div>

<h3 id="create-wordpress-site-with-same-domain">Create wordpress site with same domain<a class="headerlink" href="#create-wordpress-site-with-same-domain" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>wo site create mydomain.tld --wpredis
</pre></div>

<h3 id="cleanup-default-wp-database-and-remove-files">Cleanup default WP database and remove files<a class="headerlink" href="#cleanup-default-wp-database-and-remove-files" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>sudo -u www-data -H wp db clean --yes --path<span class="o">=</span>/var/www/mydomain.tld/htdocs
rm -rf /var/www/mydomain.tld/htdocs/*
</pre></div>

<h3 id="setup-a-password-less-ssh-access-between-your-servers">Setup a password-less ssh access between your servers<a class="headerlink" href="#setup-a-password-less-ssh-access-between-your-servers" title="Permanent link">&para;</a></h3>
<h4 id="generate-ssh-keys">Generate SSH-Keys<a class="headerlink" href="#generate-ssh-keys" title="Permanent link">&para;</a></h4>
<p>If the user on the new server do not have ssh-keys yet, you can generate them with the following command :</p>
<div class="codehilite"><pre><span></span>ssh-keygen -t ed25519
</pre></div>

<p>Then just press enter to confirm ssh key path.
Your public ssh key should be available in the directory <code class="codehilite"><span class="err">~/.ssh/</span></code> ( <code class="codehilite"><span class="err">/root/.ssh/</span></code> if you are logged in as root )</p>
<h4 id="add-ssh-public-key-to-old-srv">Add SSH Public key to OLD-SRV<a class="headerlink" href="#add-ssh-public-key-to-old-srv" title="Permanent link">&para;</a></h4>
<p>You can use the following command to automatically add the public SSH Key to the server :</p>
<div class="codehilite"><pre><span></span>ssh-copy-id root@192.168.0.1
</pre></div>

<p>Otherwise, you can still display the public ssh-key with the command <code class="codehilite"><span class="err">cat ~/.ssh/id_ed25519.pub</span></code> and copy it manually in the file <code class="codehilite"><span class="err">~/.ssh/authorized_keys</span></code> of the other server.</p>
<h4 id="ssh-login-without-password">SSH Login without password<a class="headerlink" href="#ssh-login-without-password" title="Permanent link">&para;</a></h4>
<p>You should now be able to login from the server where you generated the SSH Keys to the other one without password :</p>
<div class="codehilite"><pre><span></span>ssh root@192.168.0.1
</pre></div>

<h4 id="ssh-alias-and-config">SSH Alias and config<a class="headerlink" href="#ssh-alias-and-config" title="Permanent link">&para;</a></h4>
<p>If you prefer to use an alias to login to OLD-SRV rather than using the IP, or if you want to define a custom SSH port, you just have to create/edit the file <code class="codehilite"><span class="err">~/.ssh/config</span></code> and to define settings this way :</p>
<div class="codehilite"><pre><span></span>Host OLD-SRV
  Hostname <span class="m">192</span>.168.0.1
  Port <span class="m">12345</span>
</pre></div>

<p>Then you will be able to login with :</p>
<div class="codehilite"><pre><span></span>ssh root@OLD-SRV
</pre></div>

<p>or even with</p>
<div class="codehilite"><pre><span></span>ssh OLD-SRV
</pre></div>

<h3 id="transfer-files-from-old-srv-to-new-srv">Transfer files from OLD-SRV to NEW-SRV<a class="headerlink" href="#transfer-files-from-old-srv-to-new-srv" title="Permanent link">&para;</a></h3>
<p>To safely migrate files from OLD-SRV to NEW-SRV, we will use rsync because it's fast and secure (files transfer is done over SSH).
If you have configured password-less SSH login with the previous steps, and defined an alias into <code class="codehilite"><span class="err">~/.ssh/config</span></code> you can use the following command to copy files from OLD-SRV to NEW-SRV</p>
<div class="codehilite"><pre><span></span>rsync -avzh --progress --ignore-existing <span class="se">\</span>
root@OLD-SRV:/var/www/mydomain.tld/htdocs/ <span class="se">\</span>
/var/www/mydomain.tld/htdocs/
</pre></div>

<p>If you haven't created the file ~/.ssh/config and use custom SSH ports, you can define SSH port with rsync by using the following command :</p>
<div class="codehilite"><pre><span></span>rsync -avzh -e <span class="s2">&quot;ssh -p 12345&quot;</span> <span class="se">\</span>
--progress --ignore-existing <span class="se">\</span>
root@old_server_IP:/var/www/mydomain.tld/htdocs/ <span class="se">\</span>
/var/www/mydomain.tld/htdocs/
</pre></div>

<h4 id="do-not-copy-the-file-wp-configphp">Do not copy the file wp-config.php<a class="headerlink" href="#do-not-copy-the-file-wp-configphp" title="Permanent link">&para;</a></h4>
<p>With WordOps or EasyEngine v3, wp-config.php default path is <code class="codehilite"><span class="err">/var/www/mydomain.tld</span></code>. If you moved it into htdocs directory, it was probably transfered with rsync during the previous step. In this case remove it or rename it before importing the database on the new server, otherwise WP-CLI may not be able to login into MySQL.</p>
<p>Command example to keep previous wp-config.php file as backup :</p>
<div class="codehilite"><pre><span></span>mv /var/www/mydomain.tld/htdocs/wp-config.php /var/www/mydomain.tld/wp-config.php.bak
</pre></div>

<h3 id="restore-the-database-on-new-srv">Restore the database on NEW-SRV<a class="headerlink" href="#restore-the-database-on-new-srv" title="Permanent link">&para;</a></h3>
<p>We will use WP-CLI to easily import the database dump we have previously created on OLD-SRV.</p>
<div class="codehilite"><pre><span></span><span class="nb">cd</span> /var/www/mydomain.tld/htdocs
wp db import my_domain_tld-2019-07-25-XX44z4.sql --allow-root
rm mydomain_co-2019-07-25-XX44z4.sql
</pre></div>

<h3 id="lets-encrypt">Let's Encrypt<a class="headerlink" href="#lets-encrypt" title="Permanent link">&para;</a></h3>
<p>If your site was secured with a Let's Encrypt SSL certificate, you can issue a new certificate on NEW-SRV with the command :</p>
<div class="codehilite"><pre><span></span>wo site update mydomain.tld -le
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../manage-ssl-certificates/" title="LetsEncrypt SSL certificates" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                LetsEncrypt SSL certificates
              </span>
            </div>
          </a>
        
        
          <a href="../wordops-with-digitalocean-volume/" title="WordOps With DigitalOcean volumes" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                WordOps With DigitalOcean volumes
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 WordOps - <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img style="display:inline;" alt="Licence Creative Commons" style="border-width:0" src="https://docs.wordops.net/images/80x15.png" /></a>
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://wordops.net" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/WordOps" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/WordOps_" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://community.wordops.io/slack" class="md-footer-social__link fa fa-slack"></a>
    
      <a href="https://community.wordops.net" class="md-footer-social__link fa fa-comments"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.a8b5e56f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../js/asciinema-player.js"></script>
      
    
  </body>
</html>